<!-- <div class="page-breadcrumb page-header">
    <div class="row">
        <div class="col-12 align-self-center">
            <h4 class="page-title">Site Recommendation Sheet</h4>
        </div>
    </div>
</div> -->
<div class="purchace-requestTab">
    <mat-tab-group [backgroundColor]="'primary'" animationDuration="0ms" [(selectedIndex)]="demo1TabIndex">
        <mat-tab>
            <ng-template mat-tab-label>
                Site Recommendation Sheet
            </ng-template>
            <ng-template matTabContent>
                <mat-card>
                    <mat-card-content>
                        <div class="row" *ngIf="initialdata">
                            <div class="col-2">
                                <label>WO  Number<span class="mandetory">*</span></label>
                            </div>
                            <div class="col-4">
                                <mat-form-field class="example-full-width" appearance="outline" class="matformfieldstyles">
                                    <input type="text" placeholder="Search Material Code/Name " aria-label="Number" matInput
                                         class="inputdropdown1" [(ngModel)]="formdata.wonumber" name="wonumber" 
                                        (keyup)="getwoDATA($event)" [matAutocomplete]="auto4" />
            
                                    <mat-autocomplete autoActiveFirstOption #auto4="matAutocomplete"
                                        >
            
                                        <mat-option *ngFor="let item of woList" [value]="item.number">
                                            {{item.number}}</mat-option>
                                    </mat-autocomplete>
                                </mat-form-field>
                                <!-- <select class="dropdownstyles" [(ngModel)]="formdata.wonumber" name="wonumber" (change)="selectedwonumber()">
                                <option selected disabled>Select One</option>
            
                                <option *ngFor="let item of woList" [ngValue]="item.number">{{item.number}}
                                </option>
                            </select> -->
                                <!-- <input type="text" placeholder="Enter WO Number" class="inputstyles"
                                [(ngModel)]="formdata.wonumber" name="wonumber"> -->
                            </div>
                            <div class="col-2"> 
                                <button type="button" mat-raised-button class="savebutton" (click)="selectedWOnumber()" [disabled]="!formdata.wonumber">Select</button>
                            </div>
                        </div>
                        <div *ngIf="secondarydata">
                        <form #finalform="ngForm" (ngSubmit)="finalform.form.valid && savefinaldata(finalform)" >
                            <div class="row">
                                <div class="col-2">
                                    <label>Company Name<span class="mandetory">*</span></label>
                                </div>
                                <div class="col-4">
                                    <select class="dropdownstyles" [(ngModel)]="formdata.companyname" name="companyname">
                                        <option selected disabled>Select One</option>
                                        <option *ngFor="let item of companyData" [ngValue]="item.name">{{item.name}}
                                        </option>
                                    </select>
                            <!-- <span class="text-danger"
                                *ngIf="(date.touched || finalform.submitted) && date.errors?.required">
                                Date is required
                            </span> -->
                        </div>
                                <div class="col-2">
                                    <label>Description Of Work<span class="mandetory">*</span></label>
                                </div>
                                <div class="col-4">
                                    <input type="text" class="inputstyles" placeholder="Enter Description"
                                    [(ngModel)]="formdata.description" name="description">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-2">
                                    <label>Contractor Name<span class="mandetory">*</span></label>
                                </div>
                                <div class="col-4">
                                    <input type="text" class="inputstyles" placeholder="Enter Contractor Name"
                                    [(ngModel)]="formdata.contractorname" name="contractorname">
                                    <!-- <select class="dropdownstyles" [(ngModel)]="formdata.companyname" name="companyname">
                                        <option selected disabled>Select One</option>
                                        <option *ngFor="let item of companyData" [ngValue]="item.name">{{item.name}}
                                        </option>
                                    </select> -->
                                </div>
                                <div class="col-2">
                                    <label>Work Order Date<span class="mandetory">*</span></label>
                                </div>
                                <div class="col-4">
                                    <input type="date" class="inputstyles" style="text-transform:uppercase ;"
                                    [(ngModel)]="formdata.wodate" name="wodate">
                                </div>
                            </div>
                            <div class="row" >                      
                                <div class="col-2">
                                    <label>Work Order Value<span class="mandetory">*</span></label>
                                </div>
                                <div class="col-4">
                                    <input type="text" placeholder="Enter WO Value" class="inputstyles"
                                    [(ngModel)]="formdata.wovalue" name="wovalue">
                                </div>
                                <div class="col-2">
                                    <label>Debit Value Royalty<span class="mandetory">*</span></label>
                                </div>
                                <div class="col-4">
                                    <input type="text" placeholder="Enter Debit Value Royality" class="inputstyles"
                                    [(ngModel)]="formdata.debitvalue" name="debitvalue">
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-2">
                                    <label>Diesel Recovery<span class="mandetory">*</span></label>
                                </div>
                                <div class="col-4">
                                    <input type="text" placeholder="Enter Diesel Recovery" class="inputstyles"
                                    [(ngModel)]="formdata.dieselrecovery" name="dieselrecovery">
                                </div>
                                <div class="col-2">
                                    <label>Invoice Number<span class="mandetory">*</span></label>
                                </div>
                                <div class="col-4">
                                    <input type="text" placeholder="Enter Invoice Number" class="inputstyles"
                                    [(ngModel)]="formdata.invnumber" name="invnumber" >
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-2">
                                    <label>RA Bill From Date<span class="mandetory">*</span></label>
                                </div>
                                <div class="col-4">
                                    <input type="date" style="text-transform: uppercase;" class="inputstyles"
                                    [(ngModel)]="formdata.rafromdate" name="rafromdate">
                                </div>
                                <div class="col-2">
                                    <label>RA Bill To Date<span class="mandetory">*</span></label>
                                </div>
                                <div class="col-4">
                                    <input type="date" style="text-transform: uppercase;" class="inputstyles"
                                    [(ngModel)]="formdata.ratodate" name="ratodate" >
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-2">
                                    <label>Tds Description<span class="mandetory">*</span></label>
                                </div>
                                <div class="col-4">
                                    <select class="dropdownstyles" [(ngModel)]="formdata.tdsdesc" 
                                    name="tdsdesc" (change)="selectedtds()">
                                    <option selected disabled>Select One</option>
                
                                    <option *ngFor="let item of taxData" [ngValue]="item.code">{{item.code}}
                                    </option>
                                </select>
                                    <!-- <input type="text" class="inputstyles"
                                    [(ngModel)]="formdata.tdsdesc" name="tdsdesc"> -->
                                </div>
                                <div class="col-2">
                                    <label>Tds Percentage<span class="mandetory">*</span></label>
                                </div>
                                <div class="col-4">
                                    <input type="text" placeholder="Enter Tds Percentage" class="inputstyles"
                                    [(ngModel)]="formdata.tdspercentage" name="tdspercentage" >
                                </div>
                            </div>
                            <div class="row">  
                                <div class="col-2">
                                    <label>Cess Description<span class="mandetory">*</span></label>
                                </div>
                                <div class="col-4">
                                    <select class="dropdownstyles" [(ngModel)]="formdata.labourdesc" 
                                    name="labourdesc" (change)="selectedlabour()">
                                    <option selected disabled>Select One</option>
                
                                    <option *ngFor="let item of taxData" [ngValue]="item.code">{{item.code}}
                                    </option>
                                </select>
                                    
                                    <!-- <input type="text" class="inputstyles"
                                    [(ngModel)]="formdata.labourdesc" name="labourdesc"> -->
                                </div>
                                <div class="col-2">
                                    <label>Cess Percentage<span class="mandetory">*</span></label>
                                </div>
                                <div class="col-4">
                                    <input type="text" placeholder="Enter Labour Percentage" class="inputstyles"
                                    [(ngModel)]="formdata.labourpercentage" name="labourpercentage" >
                                </div>
                            </div>

                            
                            <div class="row">
                                <div class="col-md-6">
                                <button mat-raised-button class="savebutton" (click)="backtoprevious()" style="float: right;">Back</button>
                                    <button mat-raised-button class="savebutton" style="float: right;" [disabled]="formdatatotablearray.length==0">{{btn}}</button>
                                </div>
                                <div class="col-md-6">
                                    <button
                                    type="button"
                                    mat-raised-button
                                    class="m-t-10 attachfile"
                                    color="secondary"
                                    (click)="autoFileUpload2.click()"
                                  >
                                    Attach File&nbsp;  <mat-icon 
                                    style="cursor:pointer;font-size:24px">file_upload</mat-icon></button>
                                    <div class="file">
                                      <input hidden class="form-control-file" name="file" type="file" multiple
                                      (change)="uploadqsdfiles($event)" #autoFileUpload2  >
                                      <ng-container *ngIf=" fileUploadUrlssrs.length > 0">
                                        <div *ngFor="let item of filenamearray1;let i=index;">{{i+1}}.&nbsp;{{item}}</div>
                                      <!-- <span style="margin-left:3px">Selected : {{fileurls.length}} files</span>   -->
                                      </ng-container>         
                                      </div>
                                </div>
                            </div>
                        </form>
                    
                        <div class="row">
                            <div class="col-12 text-right float-right">
                                <button mat-icon-button value="Add" matTooltip="Add" class="custom-icon-button" style="background:none;">
                                    <span class="material-icons" (click)="addservicedata(serviceformdata)"
                                    style="margin-top:9%;">
                                        add
                                    </span>
                                </button>
                            </div>
                        </div>
                        <div class="row m-t-10">
                            <div class="col-md-12 col-12">
                                <div class="table table-responsive" mat-table-wrapper>
                                    <div class="example-table-container">
                                        <table mat-table [dataSource]="dataSource">
                                            <ng-container matColumnDef="lineItem">
                                                <th mat-header-cell *matHeaderCellDef>SNO</th>
                                                <td mat-cell *matCellDef="let row;let i=index;">{{i+1}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="serviceCode">
                                                <th mat-header-cell *matHeaderCellDef>Service Code</th>
                                                <td mat-cell *matCellDef="let row">{{row.service_code}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="serviceDescription">
                                                <th mat-header-cell *matHeaderCellDef>Service Description</th>
                                                <td mat-cell *matCellDef="let row">{{row.service_description}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="uom">
                                                <th mat-header-cell *matHeaderCellDef>Unit of Measurement</th>
                                                <td mat-cell *matCellDef="let row">{{row.uom || row.unit_of_measurement}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="unitPrice">
                                                <th mat-header-cell *matHeaderCellDef>Unit Price</th>
                                                <td mat-cell *matCellDef="let row">{{(row.unitprice || row.unit_price) | number:'1.2-2'}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="Quantity">
                                                <th mat-header-cell *matHeaderCellDef>Quantity</th>
                                                <td mat-cell *matCellDef="let row">{{row.quantity}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="taxdescription">
                                                <th mat-header-cell *matHeaderCellDef>Tax Description</th>
                                                <td mat-cell *matCellDef="let row">{{row.taxdescription || row.tax_description}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="TaxPercentage">
                                                <th mat-header-cell *matHeaderCellDef>Tax Percentage</th>
                                                <td mat-cell *matCellDef="let row">{{row.TaxPercent || row.tax_percentage}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="TaxValue">
                                                <th mat-header-cell *matHeaderCellDef>Tax Value</th>
                                                <td mat-cell *matCellDef="let row">{{(row.unitprice || row.unit_price)*row.quantity*(row.TaxPercent || row.tax_percentage)*0.01 | number:'1.2-2'}}</td>
                                            </ng-container>
                                            <ng-container matColumnDef="TotalValue">
                                                <th mat-header-cell *matHeaderCellDef>Total Value</th>
                                                <td mat-cell *matCellDef="let row">{{((row.unitprice || row.unit_price)*row.quantity)+((row.unitprice || row.unit_price)*row.quantity*(row.TaxPercent || row.tax_percentage)*0.01) | number:'1.2-2'}}</td>
                                            </ng-container>
                                
                                            <ng-container matColumnDef="action">
                                                <th mat-header-cell *matHeaderCellDef style="width:16%">Action</th>
                                                <td mat-cell *matCellDef="let row ; let i=index">
                                                    <button class="btn" style="border:none">
                                                        <mat-icon aria-hidden="false" aria-label="Example home icon"
                                                            class="text-primary" (click)="editservicedata(row,i,editserviceformdata)">
                                                            edit</mat-icon>
                                                    </button>
                                                    <button mat-icon-button
                                                        style="color: red;border:none;background: none;"
                                                        aria-label="Example icon button with a vertical three dot icon"
                                                        (click)="deleterowData(i)">
                                                        <mat-icon>delete</mat-icon>
                                                    </button>
                                                </td>
                                            </ng-container>

                                            <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky: true">
                                            </tr>
                                            <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
                                        </table>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                        <h2 *ngIf="logdata" class="activitylog">Activity Log</h2>
                    <div class="tablediv" *ngIf="logdata">
                        <table >
                            <thead style="background: #e9ecef;" class="text-center headerclass">
                                <!-- <tr> -->
                                    <th>SNO</th>
                                    <th style="padding:10px;">User Name</th>
                                    <th>Created Date</th>
                                    <th>Reference Number</th>
                                    <th>Description</th>
                                    <th>Reason</th>
                                    <th>Action</th>
                                <!-- </tr> -->
                            </thead>
                            <tbody class="text-center">
                                <tr *ngFor="let item of logdata;let i=index;">
                                    <td>{{i+1}}</td>
                                    <td>{{item.username}}</td>
                                    <td>{{item.date_time | date:'dd-MM-yyyy HH:mm:ss'}}</td>
                                    <td >{{item.reference_number}} </td>
                                    <td >{{item.description}}</td>
                                    <td >{{item.reason}} </td>
                                        <td>{{item.action}}
                                            <!-- <button mat-icon-button style="color: red;border:none;cursor: pointer;"
                                               aria-label="Example icon button with a vertical three dot icon"
                                                >
                                                 <mat-icon>delete</mat-icon>
                                                 </button> -->
                                        </td>
                                </tr>
                            </tbody>
                        </table>
                        </div>
                        
                    </mat-card-content>
                </mat-card>
            </ng-template>
        </mat-tab>
        <mat-tab>
            <ng-template mat-tab-label>
                List
            </ng-template>
            <ng-template matTabContent>
                <ng-container>
                    <div class="row m-t-10">
                        <div class="col-md-12 col-12">
                            <div class="table table-responsive" mat-table-wrapper>
                                <div class="example-table-container">
                                    <table mat-table [dataSource]="dataSourceList">
                                        <ng-container matColumnDef="sno">
                                            <th mat-header-cell *matHeaderCellDef>SNO</th>
                                            <td mat-cell *matCellDef="let row;let i=index;">{{(i+1) +
                                                (purcreqpaginator.pageIndex *
                                                purcreqpaginator.pageSize)}}</td>
                                        </ng-container>
                                        <ng-container matColumnDef="number">
                                            <th mat-header-cell *matHeaderCellDef>SRS Number</th>
                                            <td mat-cell *matCellDef="let row">{{row.number}}</td>
                                        </ng-container>
                                        <ng-container matColumnDef="date">
                                            <th mat-header-cell *matHeaderCellDef>Date</th>
                                            <td mat-cell *matCellDef="let row">{{row.date | date:'dd-MM-yyyy'}}</td>
                                        </ng-container>
                                        <ng-container matColumnDef="company_name">
                                            <th mat-header-cell *matHeaderCellDef>Company Name</th>
                                            <td mat-cell *matCellDef="let row">{{row.company_name}}</td>
                                        </ng-container>
                                        <ng-container matColumnDef="work_order_number">
                                            <th mat-header-cell *matHeaderCellDef>Work Order Number</th>
                                            <td mat-cell *matCellDef="let row">{{row.work_order_number}}</td>
                                        </ng-container>
                                        <ng-container matColumnDef="ra_bill_number">
                                            <th mat-header-cell *matHeaderCellDef>RA Bill Number</th>
                                            <td mat-cell *matCellDef="let row">{{row.ra_bill_number}}</td>
                                        </ng-container>
                                        <ng-container matColumnDef="action">
                                            <th mat-header-cell *matHeaderCellDef>Action</th>
                                            <td mat-cell *matCellDef="let row" class="text-center">
                                                <div class="mb-0">
                                                    <mat-icon style="border:none;background: none;cursor: pointer;"
                                                    (click)="editsmsdata(row,Editmodel)">edit</mat-icon>&nbsp;
                                                    <mat-icon style="color: red;border:none;background: none;cursor: pointer;"
                                                    (click)="deleteservicedata(row, deletedata)">delete</mat-icon>&nbsp;
                                                    <mat-icon (click)="printsiterecom(row)" style="cursor:pointer;"> local_printshop</mat-icon>
                                                    &nbsp;
                                                    <mat-icon (click)="openfileuploadmodel(fileuploadmodel,row)"
                                                    style="cursor:pointer;font-size:24px">file_upload</mat-icon>
                                                   
                                                <!-- </button>
                                                <button 
                                                class="savebutton" style="margin-left: 1%;height: 21px;padding-right:33px;font-size: 93%;"
                                                aria-label="Example icon button with a vertical three dot icon"
                                                (click)="printsiterecom(row)">Print
                                                
                                            </button>&nbsp;
                                            <i class="fa fa-paperclip" aria-hidden="true" (click)="openfileuploadmodel(fileuploadmodel,row)"
                                                        style="cursor:pointer;font-size:16px"></i> -->
                                                    </div>
                                            </td>
                                        </ng-container>
                                        <tr mat-header-row *matHeaderRowDef="displayedColumnsList;sticky: true">
                                        </tr>
                                        <tr mat-row *matRowDef="let row; columns: displayedColumnsList"></tr>
                                    </table>
                                    <div *ngIf="reaData==true" class="text-center">
                                        <h4 class="text-secondary m-3" *ngIf="loadingRecords">
                                            Loading...
                                        </h4>
                                        <h4 class="text-secondary m-3" *ngIf="!loadingRecords">
                                            No Records Found
                                        </h4>
                                    </div>
                                    <mat-paginator [length]="totalRecords" [pageSize]="10"
                                        [pageSizeOptions]="[5,10, 25, 50, 75, 100]" #purcreqpaginator
                                        (page)="onpageevent($event)">
                                    </mat-paginator>
                                </div>
                            </div>
                        </div>
                    </div>
                </ng-container>
            </ng-template>
        </mat-tab>
    </mat-tab-group>
</div>

<!-- ///////////////////////////////////////////////////////////////////////////////////////////////////// -->

<ng-template #serviceformdata>
    <div mat-dialog-title class="dialog-title">
        <div class="row">
            <div class="col-11">
                <h2>Add Items</h2>
            </div>
            <div class="col-1">
                <button mat-icon-button aria-label="close dialog" mat-dialog-close class="closeicon float-right"
                    (click)="closedialogdata()" style="border:none;background:none">
                    <mat-icon>close</mat-icon>
                </button>
            </div>
        </div>
    </div>
    <mat-dialog-content>
        <form #myformdata="ngForm" (ngSubmit)="binddatatotable(myformdata)">
            <div class="row">
                <div class="col-md-2">
                    <label>Service Code/Name<span class="mandetory">*</span></label>
                </div>
                <div class="col-md-4">
                    <mat-form-field class="dropdown" appearance="none" style="width: 99%;
                    border: 1px solid;
                    border-radius: 5px;
                    height: 52%;
                    margin-left: 2%;">
                        <input type="text" class="inputdropdown" placeholder="Search Material Code/Name" aria-label="Number" matInput
                            name="servicecode" [(ngModel)]="dialogdata.servicecode" (keyup)="filterdata($event)"
                            [matAutocomplete]="auto">
                        <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete"
                            (optionSelected)="selectedserviceuom()">

                            <mat-option *ngFor="let item of masterData" [value]="item.system_reference_1">
                                {{item.system_reference_1}}</mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
                <div class="col-md-2">
                    <label>Unit of Measurement<span class="mandetory">*</span></label>
                </div>
                <div class="col-md-4">
                    <input type="text" class="inputstyles" placeholder="Enter UOM" name="uom"
                        [(ngModel)]="dialogdata.uom">
                </div>
            </div>
            <div class="row" style="margin-top:-2%">
                <div class="col-2">
                    <label>Quantity<span class="mandetory">*</span></label>
                </div>
                <div class="col-4">
                    <input type="number" class="inputstyles" placeholder="Enter Quantity" 
                    [(ngModel)]="dialogdata.quantity" name="quantity"
                    >
                </div>
                <div class="col-2">
                    <label>Unit Price<span class="mandetory">*</span></label>
                </div>
                <div class="col-4">
                    <input type="number" class="inputstyles" placeholder="Enter Unit Price" 
                    [(ngModel)]="dialogdata.unitprice" name="unitprice"
                    >
                </div>
            </div>
            <div class="row">
                <div class="col-2">
                    <label>Tax Description<span class="mandetory">*</span></label>
                </div>
                <div class="col-4">
                    <select class="dropdownstyles" [(ngModel)]="dialogdata.taxdescription" 
                    name="taxdescription" (change)="selectedtax()">
                    <option selected disabled>Select One</option>

                    <option *ngFor="let item of taxData" [ngValue]="item.code">{{item.code}}
                    </option>
                </select>
                    <!-- <input type="text" class="inputstyles" placeholder="Enter Tax Description" 
                    [(ngModel)]="dialogdata.taxdescription" name="taxdescription"
                    > -->
                </div>
                <div class="col-2">
                    <label>Tax Percentage<span class="mandetory">*</span></label>
                </div>
                <div class="col-4">
                    <input type="text" class="inputstyles" placeholder="Enter Tax Percentage" 
                    [(ngModel)]="dialogdata.TaxPercent" name="TaxPercent" readonly>
                </div>
            </div>
           
            <div class="save text-center m-t-20">
                <button mat-raised-button class="savebutton" [disabled]="!dialogdata.servicecode||!dialogdata.taxdescription
                ||!dialogdata.unitprice||!dialogdata.quantity" style="width:6%">Add</button>
            </div>
        </form>
    </mat-dialog-content><br>
    <!-- <table *ngIf="smsdata">
        <thead>
            <tr class="tablestyles">
                <th>Company Name</th>
                <th>Storage Location</th>
                <th>
                    Valuation Type
                </th>
                <th>
                Quantity
             </th>
             <th>Value</th>
            </tr>
        </thead> 
        <tbody>
            <tr *ngFor="let item of smsdata" >
                <td style="width: 28%;">{{item.company_name}}</td>
               <td>{{item.storage_location}}</td> 
               <td>{{item.valuation_type}}</td>
               <td>{{item.quantity}}</td>
               <td>{{item.value | number:'1.2-2'}}</td>
            </tr>
        </tbody>
     </table> -->
</ng-template>
<ng-template #editserviceformdata>
    <div mat-dialog-title class="dialog-title">
        <div class="row">
            <div class="col-11">
                <h2>Edit Items</h2>
            </div>
            <div class="col-1">
                <button mat-icon-button aria-label="close dialog" mat-dialog-close class="closeicon float-right"
                    (click)="closeeditdialogdata()" style="border:none;background:none">
                    <mat-icon>close</mat-icon>
                </button>
            </div>
        </div>
    </div>
    <mat-dialog-content>
        <form #myeditformdata="ngForm" (ngSubmit)="editbindedDatatotable(myeditformdata)">
            <div class="row">
                <div class="col-md-2">
                    <label>Service Code/Name<span class="mandetory">*</span></label>
                </div>
                <div class="col-md-4">
                    <mat-form-field  style="width: 99%;
                    border: 1px solid;
                    border-radius: 5px;
                    height: 52%;
                    margin-left: 2%;" appearance="none">
                        <input type="text" class="inputdropdown" placeholder="Search Material Code/Name" aria-label="Number" matInput
                            name="servicecode" [(ngModel)]="editeddialogdata.servicecode" (keyup)="editfilterdata($event)"
                            [matAutocomplete]="auto">
                        <mat-autocomplete autoActiveFirstOption #auto="matAutocomplete"
                            (optionSelected)="selectedserviceuomedit()">

                            <mat-option *ngFor="let item of masterData" [value]="item.system_reference_1">
                                {{item.system_reference_1}}</mat-option>
                        </mat-autocomplete>
                    </mat-form-field>
                </div>
                <div class="col-md-2">
                    <label>Unit of Measurement<span class="mandetory">*</span></label>
                </div>
                <div class="col-md-4">
                    <input type="text" class="inputstyles" placeholder="Enter UOM" name="uom"
                        [(ngModel)]="editeddialogdata.uom">
                </div>
            </div>
            <div class="row" style="margin-top:-2%">
                <div class="col-2">
                    <label>Quantity<span class="mandetory">*</span></label>
                </div>
                <div class="col-4">
                    <input type="text" class="inputstyles" placeholder="Enter Quantity" 
                    [(ngModel)]="editeddialogdata.quantity" name="quantity"
                    >
                </div>
                <div class="col-2">
                    <label>Unit Price<span class="mandetory">*</span></label>
                </div>
                <div class="col-4">
                    <input type="text" class="inputstyles" placeholder="Enter Unit Price" 
                    [(ngModel)]="editeddialogdata.unitprice" name="unitprice"
                    >
                </div>
            </div>
            <div class="row">
                <div class="col-2">
                    <label>Tax Description<span class="mandetory">*</span></label>
                </div>
                <div class="col-4">
                    <select class="dropdownstyles" [(ngModel)]="editeddialogdata.taxdescription" 
                    name="taxdescription" (change)="selectedtaxedit()">
                    <option selected disabled>Select One</option>

                    <option *ngFor="let item of taxData" [ngValue]="item.code">{{item.code}}
                    </option>
                </select>
                    <!-- <input type="text" class="inputstyles"  
                    [(ngModel)]="editeddialogdata.taxdesc" name="taxdesc" > -->
                </div>
                <div class="col-2">
                    <label>Tax Percentage<span class="mandetory">*</span></label>
                </div>
                <div class="col-4">
                    <input type="text" class="inputstyles"
                    [(ngModel)]="editeddialogdata.TaxPercent" name="TaxPercent">
                </div>
            </div>
           
            <div class="save text-center m-t-20">
                <button mat-raised-button class="savebutton" [disabled]="!editeddialogdata.servicecode" style="width:8%">Update</button>
            </div>
        </form>
    </mat-dialog-content>
</ng-template>

<ng-template #deletedata>
    <h1 mat-dialog-title>Delete Activity</h1>
    <div mat-dialog-content>
        <p>Are you sure, you want to delete record?</p>
        <div class="row">
            <div class="col-md-2">
                <label style="padding-top:5px;">Reason</label>
            </div>
            <div class="col-md-4">
                <input type="text" placeholder="Please Enter Reason" class="inputstyles" name="reason"
          [(ngModel)]="deletemodel.reason" style="width: 181%;">  
            </div>
        </div>

    </div>
    <div mat-dialog-actions>
        <button mat-button mat-dialog-close class="matButton" style="background: transparent;">Close</button>&nbsp;
        <button mat-button cdkFocusInitial (click)="deleteItem()" class="matButton"
        [disabled]="!deletemodel.reason">Delete</button>
    </div>
</ng-template>
<ng-template #fileuploadmodel>
    <div mat-dialog-title class="dialog-title">
        <h2>Site Recommendation Sheet: {{srsnumber}}</h2>
        <button mat-icon-button aria-label="close dialog" mat-dialog-close class="closeicon"
            (click)="closemodel()" style="border:none;background:none;margin-top: -9%;">
            <mat-icon>close</mat-icon>
        </button>
    </div>
   <div  mat-dialog-content class="row">
    <div *ngIf="filedata">
    <table>
        <thead style="background: #e9ecef;">
                <th>Cread By</th>
                <th>Created Date</th>
                <th>File Name</th>
                <th>Action</th>
        </thead>
        <tbody>
            <tr *ngFor="let item of filedata">
                <td>{{item.created_by}}</td>
                <td>{{item.created_date}}</td>
                <td >{{item.file_name}} &nbsp;&nbsp;&nbsp;<i class="fas fa-eye text-cyan m-r-20 " 
                    style="cursor: pointer;" title="View File" (click)="viewDoc(item)"></i></td>
                    <td>
                        <button mat-icon-button style="color: red;border:none;cursor: pointer;"
                           aria-label="Example icon button with a vertical three dot icon"
                            (click)="deleterowfile(deletefileModel,item)">
                             <mat-icon>delete</mat-icon>
                             </button>
                    </td>
            </tr>
        </tbody>
    </table>

</div>
   </div><br>
<button mat-raised-button type="button" (click)="autoFileUpload1.click()">Attach File</button>
<div class="file">
<input hidden class="form-control-file" name="file" type="file" multiple
(change)="uploadWbsFile($event);showContent(i);" #autoFileUpload1 />
<ng-container *ngIf="fileUploadUrls.length>0">
<div *ngFor="let item of filenamearray;let i=index;">{{i+1}}.&nbsp;{{item}}</div>

<!-- <span >{{createNewFile.fileName}}</span>   -->
</ng-container>         
</div>
</ng-template>
<ng-template #deletefileModel>
    <h1 mat-dialog-title>Delete Activity</h1>
    <div mat-dialog-content>Are you sure, you want to delete file?</div>
    <div mat-dialog-actions>
        <button mat-button mat-dialog-close class="matButton" >Close</button>&nbsp;
        <button mat-button cdkFocusInitial (click)="deleteexistingfile()" class="matButton">Delete</button>
    </div>
</ng-template>
<ng-template #Editmodel>
    <h1 mat-dialog-title></h1>
    <div mat-dialog-content>
<div class="row">
    <div class="col-md-2">
        <label style="padding-top:5px;">Reason</label>
    </div>
    <div class="col-md-4">
        <input type="text" placeholder="Please Enter Reason" class="inputstyles" name="reason"
  [(ngModel)]="editModel.reason" style="width: 181%;">  
    </div>
</div>
</div><br>
<div mat-dialog-actions>
    <button mat-button mat-dialog-close class="matButton" >Close</button>&nbsp;
    <button mat-button cdkFocusInitial (click)="saveeditreason()" class="matButton"
    [disabled]="!editModel.reason">Submit</button>
</div>
</ng-template>


